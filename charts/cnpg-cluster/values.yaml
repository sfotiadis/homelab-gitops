imageName: ghcr.io/cloudnative-pg/postgresql:17.5
instances: 2

initdb:
  database: "" # defaults to release name
  owner: app
  secret:
    name: cnpg-app-user

enableSuperuserAccess: false
superuserSecret:
  name: cnpg-superuser

storageClass: local-path
storage:
  size: 5Gi

backup:
  enabled: true
  destinationPath: "" # defaults to s3://<release-name>
  endpointURL: http://minio.minio.svc.cluster.local:9000
  secret:
    name: backup-credentials
  schedule: "0 0 0 * * *" # daily at midnight
  retentionPolicy: "30d"

affinity:
  enablePodAntiAffinity: false
  topologyKey: kubernetes.io/hostname

monitoring:
  enablePodMonitor: true

# Connection pooler (PgBouncer)
pooler:
  enabled: false
  instances: 2
  type: rw  # rw (read-write) or ro (read-only)
  poolMode: session  # session, transaction, or statement
  parameters:
    max_client_conn: "1000"
    default_pool_size: "25"
